<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Judgement - Play Multiplayer Free | Real-Time Addictive Card Game</title>
<meta name="description" content="Play Judgement card game online with friends. Free multiplayer card game with real-time gameplay, lobby system, and intuitive interface. Start playing now!">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>
<!-- Project JavaScript Modules -->
<script src="js/config.js"></script>
<script src="js/state.js"></script>
<script src="js/utils.js"></script>
<script src="js/register.js"></script>
<script src="js/lobby.js"></script>
<script src="js/ui.js"></script>
<script src="js/game.js"></script>
<script src="js/scorecard.js"></script>
<script src="js/userMenu.js"></script>
<script src="js/init.js"></script>
</head>
<body>

<!-- User Dropdown Menu -->
<div id="userMenu">
  <button onclick="leaveGame()">Leave Game</button>
  <button onclick="newGame()">New Game</button>
</div>

<!-- Scorecard Overlay -->
<div id="scorecardOverlay" onclick="toggleScorecard()">
  <div id="scorecardModal" onclick="event.stopPropagation()">
    <h2>Game Scorecard</h2>
    <button class="close-btn" onclick="toggleScorecard()">‚úï</button>
    <div id="scorecardContent"></div>
  </div>
</div>

<!-- Reconnection Waiting Overlay -->
<div id="reconnectOverlay" class="reconnect-overlay" style="display: none;">
  <div class="reconnect-modal">
    <div class="reconnect-icon">‚ö†Ô∏è</div>
    <h2>Player Disconnected</h2>
    <p id="reconnectPlayerName" class="reconnect-player">Waiting for player...</p>
    <div class="reconnect-timer">
      <div class="timer-circle">
        <span id="reconnectTimer">120</span>
      </div>
      <p class="timer-label">seconds remaining</p>
    </div>
    <p class="reconnect-message">The game will resume when they reconnect</p>
    <div class="reconnect-actions">
      <button class="dismiss-btn" onclick="dismissReconnectModal()">Dismiss</button>
      <button class="continue-btn" onclick="continueWithoutPlayer()">Continue Without Player</button>
    </div>
  </div>
</div>

<!-- Registration Screen -->
<div id="register" class="screen active">
  <div class="register-container">
    <div class="register-header">
      <h1>Game of Judgement</h1>
      <p class="tagline">Play the Ultimate Card Game Online</p>
    </div>
    
    <div class="register-form">
      <div class="input-group">
        <label for="playerName">Player Name</label>
        <input type="text" id="playerName" placeholder="Enter your name" maxlength="20" autofocus>
      </div>

      <div class="input-group">
        <label for="avatarSelect">Choose Your Avatar</label>
        <div class="avatar-grid-container">
          <button class="avatar-grid-nav left hidden" id="avatarScrollLeft" type="button">‚Äπ</button>
          <div class="avatar-grid" id="avatarGrid">
            <!-- Avatars will be generated here -->
          </div>
          <button class="avatar-grid-nav right" id="avatarScrollRight" type="button">‚Ä∫</button>
        </div>
      </div>

      <div class="avatar-preview-container">
        <img id="avatarPreview" class="avatar-preview"
             src="https://api.dicebear.com/9.x/adventurer/svg?seed=Felix&backgroundColor=4caf50" alt="preview">
        <div class="avatar-name" id="avatarName">Cool Guy</div>
      </div>

      <button class="primary-btn" onclick="registerPlayer()">
        <span>Start Playing</span>
        <span class="btn-icon">‚Üí</span>
      </button>
    </div>
  </div>
</div>

<!-- ===== LOBBY SCREEN ===== -->
<div id="lobby" class="screen">
  <div class="lobby-container">
    <div class="lobby-header">
      <h1>Lobby</h1>
    </div>
    
    <div id="lobbyInfo" class="lobby-info-card"></div>
    
    <div class="players-section">
      <h3 class="section-title">Players</h3>
      <div id="lobbyList" class="lobby-list"></div>
    </div>
    
    <div id="hostSelectContainer" class="game-settings" style="display:none;">
      <div class="input-group">
        <label>Select Starting Player (Host)</label>
        <div id="hostSelect" class="custom-dropdown lobby-dropdown">
          <div class="dropdown-selected">Select Player</div>
          <div class="dropdown-arrow">‚ñº</div>
          <div class="dropdown-options"></div>
        </div>
      </div>
    </div>
    
    <div id="roundSelectContainer" class="game-settings" style="display:none;">
      <div class="input-group">
        <label>Starting Cards</label>
        <div id="roundSelect" class="custom-dropdown lobby-dropdown">
          <div class="dropdown-selected">26 cards</div>
          <div class="dropdown-arrow">‚ñº</div>
          <div class="dropdown-options"></div>
        </div>
        <small class="helper-text">Select number of cards to start with (Round 1)</small>
      </div>
    </div>
    
    <button id="startBtn" class="start-game-btn" style="display:none;" onclick="startGame()">
      <span>Start Game</span>
    </button>
  </div>
</div>

<!-- ===== GAME SCREEN ===== -->
<div id="game" class="screen">
  <!-- Top Bar -->
  <div id="gameTopBar">
    <button id="scorecardBtn" onclick="toggleScorecard()">
      üèÜ
      <span class="scorecard-label">Scorecard</span>
    </button>
    
    <h1 id="roundInfo"></h1>
    
    <div id="userInfo" onclick="toggleUserMenu()">
      <img id="userInfoAvatar" src="" alt="avatar">
      <span class="userName" id="userInfoName"></span>
    </div>
  </div>
  
  <!-- Game Content -->
  <div class="game-content">
    <!-- Center Message -->
    <div id="centerMsg"></div>
    
    <!-- Deal Button (only dealer sees this) -->
    <button id="dealBtn" style="display:none;" onclick="dealCards()">Deal Cards</button>
    
    <!-- Bidding UI -->
    <div id="biddingUI">
      <p id="biddingPrompt"></p>
      <div>
        <div id="customDropdown" class="custom-dropdown">
          <div class="dropdown-selected" id="dropdownSelected">0</div>
          <div class="dropdown-arrow">‚ñº</div>
          <div class="dropdown-options" id="dropdownOptions"></div>
        </div>
        <button onclick="submitBid()">Submit</button>
      </div>
    </div>
    
    <!-- Center Playing Table -->
    <div id="table"></div>
    
    <!-- Player's Hand (Cards) -->
  <div class="hand" id="myHand"></div>
  
    <!-- Scoreboard -->
    <div id="scoreboard"></div>
    
    <p id="playerName" style="display:none;"></p>
  </div>
</div>

<!-- Footer -->
<footer class="footer">
  Made with <span class="heart">‚ù§Ô∏è</span> by Dinesh Khandelwal
</footer>

</body>
</html>
