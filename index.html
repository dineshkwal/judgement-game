<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Judgement â€“ Minimalist Online</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="styles.css">
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>
<!-- Project JavaScript Modules -->
<script src="js/config.js"></script>
<script src="js/state.js"></script>
<script src="js/utils.js"></script>
<script src="js/register.js"></script>
<script src="js/lobby.js"></script>
<script src="js/ui.js"></script>
<script src="js/game.js"></script>
<script src="js/userMenu.js"></script>
<script src="js/init.js"></script>
</head>
<body>

<!-- User Info Display (Top Right) -->
<div id="userInfo" onclick="toggleUserMenu()">
  <img id="userInfoAvatar" src="" alt="avatar">
  <span class="userName" id="userInfoName"></span>
</div>

<!-- User Dropdown Menu (Outside userInfo) -->
<div id="userMenu">
  <button onclick="leaveGame()">Leave Game</button>
  <button onclick="newGame()">New Game</button>
</div>

<!-- Scorecard Button (Top Left) -->
<button id="scorecardBtn" onclick="toggleScorecard()" style="display:none;">ðŸ“Š Scorecard</button>

<!-- Scorecard Overlay -->
<div id="scorecardOverlay" onclick="toggleScorecard()">
  <div id="scorecardModal" onclick="event.stopPropagation()">
    <h2>Game Scorecard</h2>
    <button class="close-btn" onclick="toggleScorecard()">âœ•</button>
    <div id="scorecardContent"></div>
  </div>
</div>

<!-- ===== REGISTER SCREEN ===== -->
<div id="register" class="screen active">
  <h1>Judgement</h1>
  <input type="text" id="playerName" placeholder="Your name" maxlength="20">

  <select id="avatarSelect">
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix">Avatar 1 â€“ Cool Guy</option>
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka">Avatar 2 â€“ Curly Hair</option>
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Charlie">Avatar 3 â€“ Glasses</option>
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Lucy">Avatar 4 â€“ Ponytail</option>
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Max">Avatar 5 â€“ Bearded</option>
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Sophie">Avatar 6 â€“ Hat</option>
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Oscar">Avatar 7 â€“ Bald</option>
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Emma">Avatar 8 â€“ Bob Cut</option>
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Jack">Avatar 9 â€“ Mohawk</option>
    <option value="https://api.dicebear.com/7.x/avataaars/svg?seed=Mia">Avatar 10 â€“ Long Hair</option>
  </select>

  <img id="avatarPreview" class="avatar-preview"
       src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" alt="preview">

  <button onclick="registerPlayer()">Join Game</button>
</div>

<!-- ===== LOBBY SCREEN ===== -->
<div id="lobby" class="screen">
  <h1>Lobby</h1>
  <div id="lobbyInfo" style="background:#222;padding:1rem;border-radius:var(--radius);margin-bottom:1rem;"></div>
  <div id="lobbyList"></div>
  <div id="hostSelectContainer" style="display:none;margin-top:1rem;">
    <label style="display:block;margin-bottom:0.3rem;font-weight:bold;">Select Starting Player (Host):</label>
    <select id="hostSelect"></select>
  </div>
  <div id="roundSelectContainer" style="display:none;margin-top:1rem;">
    <label style="display:block;margin-bottom:0.3rem;font-weight:bold;">Starting Cards:</label>
    <select id="roundSelect"></select>
    <small style="display:block;color:#aaa;margin-top:0.3rem;">Select number of cards to start with (Round 1)</small>
  </div>
  <button id="startBtn" style="display:none;" onclick="startGame()">Start Game</button>
</div>

<!-- ===== GAME SCREEN ===== -->
<div id="game" class="screen">
  <h1 id="roundInfo"></h1>
  <p id="playerName" style="color:var(--accent);font-size:1.2rem;font-weight:bold;margin:.5rem 0;"></p>
  
  <!-- Scoreboard -->
  <div id="scoreboard"></div>
  
  <!-- Deal Button (only dealer sees this) -->
  <button id="dealBtn" style="display:none;" onclick="dealCards()">Deal Cards</button>
  
  <!-- Bidding UI -->
  <div id="biddingUI">
    <p id="biddingPrompt"></p>
    <div style="display:flex;gap:.5rem;justify-content:center;margin-top:.5rem;">
      <select id="bidSelect"></select>
      <button onclick="submitBid()">Submit Bid</button>
    </div>
  </div>
  
  <div id="table"></div>
  <div id="centerMsg"></div>
  <div class="hand" id="myHand"></div>
  <div id="msg"></div>
</div>

<script type="module" src="js/config.js"></script>
<script src="js/state.js"></script>
<script src="js/utils.js"></script>
<script src="js/register.js"></script>
<script src="js/lobby.js"></script>
<script src="js/ui.js"></script>
<script src="js/game.js"></script>
<script src="js/userMenu.js"></script>
<script src="js/scorecard.js"></script>
<script src="js/init.js"></script>
</body>
</html>
